# ğŸ¨ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ–ãƒ«ãƒ¼ãƒ—ãƒªãƒ³ãƒˆ (è¨­è¨ˆå›³)

## 1. ã‚¢ãƒ—ãƒªåï¼ˆä»®ï¼‰

* **ã‚³ãƒ¡ã‚«ãƒ³**: æ‰‹æŒã¡ã®ã‚³ã‚¹ãƒ¡ã‚’ãƒ‘ãƒ¬ãƒƒãƒˆã®ã‚ˆã†ã«ç®¡ç†ã—ã€æ–°ã—ã„çµ„ã¿åˆã‚ã›ï¼ˆï¼ãƒ¬ã‚·ãƒ”ï¼‰ã‚’ç”Ÿã¿å‡ºã™å ´æ‰€ã€‚

## 2. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (ã¿ã¶ããŒé ‘å¼µã‚‹)
* ~ **Flutter** 1ã¤ã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§iOS/Androidã«å¯¾å¿œã€‚~ ã§ããŸã‚‰ã‚„ã‚‹
* **è¨€èª:** Kotlin

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (ã‹ã‚„ãŒé ‘å¼µã‚‹)
* **è¨€èª:** Java (Spring Boot)
* **API:** REST API (JSONå½¢å¼)

### ã‚¯ãƒ©ã‚¦ãƒ‰ (AWS)
* **å®Ÿè¡Œç’°å¢ƒ:** **AWS Elastic Beanstalk**
    * ç†ç”±: Spring Bootã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆJARãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã®ãŒæœ€ã‚‚ç°¡å˜ã€‚
* **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹:** **Amazon RDS (MySQL or PostgreSQL)**
    * ç†ç”±: ã‚³ã‚¹ãƒ¡ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ãƒ¬ã‚·ãƒ”ã®é–¢ä¿‚æ€§ãŒæ˜ç¢ºãªãŸã‚ã€ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«DBãŒé©ã—ã¦ã„ã‚‹ã€‚
* **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸:** **Amazon S3**
    * ç†ç”±: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ç”»åƒï¼ˆã‚³ã‚¹ãƒ¡ã®å†™çœŸã€è‡ªæ’®ã‚Šï¼‰ã®ä¿å­˜å…ˆã€‚
* **èªè¨¼:** **Amazon Cognito**
    * ç†ç”±: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼ˆã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ã€ãƒ­ã‚°ã‚¤ãƒ³ï¼‰ã®ç®¡ç†ã‚’AWSã«ä¸€ä»»ã§ãã‚‹ã€‚Flutterã‹ã‚‰ã®é€£æºã‚‚å®¹æ˜“ã€‚
* **APIã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤:** **Amazon API Gateway** (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
    * ç†ç”±: Elastic Beanstalkã¸ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ç®¡ç†ã€APIã‚­ãƒ¼è¨­å®šã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã©ãŒå¯èƒ½ã€‚ãƒãƒƒã‚«ã‚½ãƒ³ã§ã¯çœç•¥ã—ã€ç›´æ¥Elastic Beanstalkã«æ¥ç¶šã—ã¦ã‚‚OKã€‚

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ (Amazon RDS)

ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ¢ãƒ‡ãƒ«ï¼ˆSQLï¼‰ã®ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆæ¡ˆã§ã™ã€‚

1.  **`users`**
    * `user_id` (VARCHAR, Primary Key) - *CognitoãŒç™ºè¡Œã™ã‚‹Sub(UUID)ã‚’æ ¼ç´*
    * `username` (VARCHAR)
    * `email` (VARCHAR, Unique)
    * `profile_image_url` (TEXT)
    * `created_at` (TIMESTAMP)

2.  **`master_cosmetics`** (å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å…±é€šã®ã‚³ã‚¹ãƒ¡ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿)
    * `master_cosmetic_id` (BIGINT, Primary Key, Auto-Increment)
    * `name` (VARCHAR)
    * `brand` (VARCHAR)
    * `category_large` (VARCHAR)
    * `category_small` (VARCHAR)
    * `jan_code` (VARCHAR, Index)
    * `image_url` (TEXT)

3.  **`user_cosmetics`** (ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã€Œæ‰‹æŒã¡ã‚³ã‚¹ãƒ¡ã€ãƒªã‚¹ãƒˆ)
    * `user_cosmetic_id` (BIGINT, Primary Key, Auto-Increment)
    * `user_id` (FK to `users.user_id`)
    * `master_cosmetic_id` (FK to `master_cosmetics.master_cosmetic_id`)
    * `purchase_date` (DATE)
    * `memo` (TEXT)
    * `created_at` (TIMESTAMP)

4.  **`tags`** (ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½œæˆã—ãŸã‚¿ã‚°)
    * `tag_id` (BIGINT, Primary Key, Auto-Increment)
    * `user_id` (FK to `users.user_id`)
    * `tag_name` (VARCHAR)
    * *(`user_id` ã¨ `tag_name` ã§è¤‡åˆUniqueåˆ¶ç´„)*

5.  **`user_cosmetic_tags`** (æ‰‹æŒã¡ã‚³ã‚¹ãƒ¡ã¨ã‚¿ã‚°ã®ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«)
    * `user_cosmetic_id` (FK to `user_cosmetics.user_cosmetic_id`)
    * `tag_id` (FK to `tags.tag_id`)
    * *(Primary Key (user_cosmetic_id, tag_id))*

6.  **`makeup_recipes`** (ãƒ¡ã‚¤ã‚¯ãƒ¬ã‚·ãƒ”)
    * `recipe_id` (BIGINT, Primary Key, Auto-Increment)
    * `user_id` (FK to `users.user_id`)
    * `title` (VARCHAR)
    * `description` (TEXT)
    * `selfie_image_url` (TEXT) - *S3ã¸ã®ãƒ‘ã‚¹*
    * `instagram_post_url` (TEXT)
    * `created_at` (TIMESTAMP)

7.  **`recipe_items`** (ãƒ¬ã‚·ãƒ”ä½¿ç”¨ã‚¢ã‚¤ãƒ†ãƒ ã®ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«)
    * `recipe_id` (FK to `makeup_recipes.recipe_id`)
    * `user_cosmetic_id` (FK to `user_cosmetics.user_cosmetic_id`)
    * *(Primary Key (recipe_id, user_cosmetic_id))*

## 4. APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¨­è¨ˆ (Spring Boot)

Flutterã‚¢ãƒ—ãƒªãŒå‘¼ã³å‡ºã™ä¸»è¦ãªAPIã®ä¾‹ã§ã™ã€‚

### Auth (CognitoãŒä¸»ã«å‡¦ç†)
* `POST /auth/register`
* `POST /auth/login`
* `POST /auth/refresh_token`

### Manage (è¦èªè¨¼)
* `GET /cosmetics` (ãƒã‚¤ãƒªã‚¹ãƒˆå–å¾—ã€ã‚¯ã‚¨ãƒªã§ã‚«ãƒ†ã‚´ãƒªãƒ»ã‚¿ã‚°çµã‚Šè¾¼ã¿)
* `POST /cosmetics` (æ‰‹æŒã¡ã‚³ã‚¹ãƒ¡ã®ç™»éŒ²)
* `GET /cosmetics/search` (ãƒã‚¹ã‚¿ãƒ¼ã‚³ã‚¹ãƒ¡æ¤œç´¢ `?q=...`)
* `GET /cosmetics/scan` (ãƒãƒ¼ã‚³ãƒ¼ãƒ‰æ¤œç´¢ `?jan=...`)
* `GET /statistics` (çµ±è¨ˆãƒ‡ãƒ¼ã‚¿å–å¾—)

### Social (è¦èªè¨¼)
* `GET /feed` (ãƒ¬ã‚·ãƒ”ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å–å¾—)
* `POST /recipes` (ãƒ¬ã‚·ãƒ”æŠ•ç¨¿)
* `GET /recipes/{recipeId}` (ãƒ¬ã‚·ãƒ”è©³ç´°)
* `GET /news` (æ–°ç™ºå£²ã‚³ã‚¹ãƒ¡æƒ…å ±)

## 5. æ©Ÿèƒ½ã¨ç”»é¢ã®ãƒ•ãƒ­ãƒ¼

* ä¸Šè¨˜ã§è¨­è¨ˆã—ãŸ **REST API** ã‚’ `http` ã‚„ `dio` ãªã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦å‘¼ã³å‡ºã™ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ã€‚
* èªè¨¼ã¯ **Cognito** ã¨é€£æºã™ã‚‹Flutterãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ (ä¾‹: `amazon_cognito_identity_dart_2`) ã‚’ä½¿ç”¨ã—ã€å–å¾—ã—ãŸJWTãƒˆãƒ¼ã‚¯ãƒ³ã‚’APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ˜ãƒƒãƒ€ãƒ¼ã«ä»˜ä¸ã—ã¾ã™ã€‚